{"ast":null,"code":"import React,{useState,useEffect}from'react';import{PlusCircle,BarChart3,Users,History,Download,Calendar,Building,Lock,UserPlus,LogOut}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[activeTab,setActiveTab]=useState('login');const[departments,setDepartments]=useState([]);const[questions,setQuestions]=useState([]);const[newDepartment,setNewDepartment]=useState('');const[newQuestion,setNewQuestion]=useState('');const[selectedDepartment,setSelectedDepartment]=useState('');const[reports,setReports]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[historyData,setHistoryData]=useState([]);const[filteredData,setFilteredData]=useState([]);const[selectedDepartmentForHistory,setSelectedDepartmentForHistory]=useState('');const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const[exportLoading,setExportLoading]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(false);const[userLevel,setUserLevel]=useState(2);// 1=superadmin, 2=admin\nconst[username,setUsername]=useState('');const[loginForm,setLoginForm]=useState({username:'',password:''});const[registerForm,setRegisterForm]=useState({username:'',password:'',confirmPassword:'',userLevel:2});const API_BASE_URL='http://localhost:5000/api';// Check if user is already logged in\nuseEffect(()=>{const token=localStorage.getItem('token');if(token){verifyToken(token);}},[]);const verifyToken=async token=>{try{const response=await fetch(`${API_BASE_URL}/admin/me`,{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setIsLoggedIn(true);setUserLevel(data.userLevel);setUsername(data.username);setActiveTab(data.userLevel===1?'departments':'questions');}else{localStorage.removeItem('token');}}catch(err){localStorage.removeItem('token');console.error('Token verification failed:',err);}};const handleLogin=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/admin/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(loginForm)});if(response.ok){const data=await response.json();localStorage.setItem('token',data.token);setIsLoggedIn(true);setUserLevel(data.userLevel);setUsername(data.username);setActiveTab(data.userLevel===1?'departments':'questions');}else{const errorData=await response.json();throw new Error(errorData.error||'Login failed');}}catch(err){setError(err.message);}finally{setLoading(false);}};const handleRegister=async e=>{e.preventDefault();setLoading(true);setError('');if(registerForm.password!==registerForm.confirmPassword){setError('Passwords do not match');setLoading(false);return;}try{const token=localStorage.getItem('token');const response=await fetch(`${API_BASE_URL}/admin/register`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({username:registerForm.username,password:registerForm.password,userLevel:registerForm.userLevel})});if(response.ok){setRegisterForm({username:'',password:'',confirmPassword:'',userLevel:2});setError('');setActiveTab('login');}else{const errorData=await response.json();throw new Error(errorData.error||'Registration failed');}}catch(err){setError(err.message);}finally{setLoading(false);}};const handleLogout=()=>{localStorage.removeItem('token');setIsLoggedIn(false);setUserLevel(2);setUsername('');setActiveTab('login');};// Load departments\nconst loadDepartments=async()=>{try{setLoading(true);const response=await fetch(`${API_BASE_URL}/departments`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();setDepartments(Array.isArray(data)?data:[]);setError('');}catch(err){console.error('Failed to load departments:',err);setDepartments([]);setError('Failed to load departments: '+err.message);}finally{setLoading(false);}};// Load questions\nconst loadQuestions=async()=>{try{setLoading(true);const response=await fetch(`${API_BASE_URL}/questions`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();setQuestions(Array.isArray(data)?data:[]);setError('');}catch(err){console.error('Failed to load questions:',err);setQuestions([]);setError('Failed to load questions: '+err.message);}finally{setLoading(false);}};// Load history data\nconst loadHistoryData=async function(){let departmentId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';let startDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';let endDate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';try{setLoading(true);let url=`${API_BASE_URL}/reports/history`;const params=new URLSearchParams();if(departmentId)params.append('departmentId',departmentId);if(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);if(params.toString()){url+=`?${params.toString()}`;}const response=await fetch(url);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();setHistoryData(Array.isArray(data)?data:[]);setFilteredData(Array.isArray(data)?data:[]);setError('');}catch(err){console.error('Failed to load history data:',err);setHistoryData([]);setFilteredData([]);setError('Failed to load history data: '+err.message);}finally{setLoading(false);}};// Update department\nconst updateDepartment=async(id,newName)=>{try{setLoading(true);const response=await fetch(`${API_BASE_URL}/departments/${id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:newName.trim()})});if(response.ok){await loadDepartments();}else{const errorData=await response.json();throw new Error(errorData.error||'Failed to update department');}}catch(err){setError(err.message);}finally{setLoading(false);}};// Delete department\nconst deleteDepartment=async id=>{if(!window.confirm('Are you sure you want to delete this department? This cannot be undone.')){return;}try{setLoading(true);const response=await fetch(`${API_BASE_URL}/departments/${id}`,{method:'DELETE'});if(response.ok){await loadDepartments();}else{const errorData=await response.json();throw new Error(errorData.error||'Failed to delete department');}}catch(err){setError(err.message);}finally{setLoading(false);}};// Export to Excel function\nconst exportToExcel=async()=>{try{var _departments$find;setExportLoading(true);let url=`${API_BASE_URL}/reports/export`;const params=new URLSearchParams();if(selectedDepartmentForHistory)params.append('departmentId',selectedDepartmentForHistory);if(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);if(params.toString()){url+=`?${params.toString()}`;}const response=await fetch(url);if(!response.ok){throw new Error(`Export failed: ${response.status}`);}// Get the blob from response\nconst blob=await response.blob();// Create download link\nconst downloadUrl=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=downloadUrl;// Generate filename with current date\nconst now=new Date();const dateStr=now.toISOString().split('T')[0];const deptName=selectedDepartmentForHistory?((_departments$find=departments.find(d=>d.DepartmentID==selectedDepartmentForHistory))===null||_departments$find===void 0?void 0:_departments$find.Name)||'Selected':'All';link.download=`Survey_Report_${deptName}_${dateStr}.xlsx`;document.body.appendChild(link);link.click();document.body.removeChild(link);// Clean up\nwindow.URL.revokeObjectURL(downloadUrl);}catch(err){console.error('Export failed:',err);setError('Export failed: '+err.message);}finally{setExportLoading(false);}};// Handle filter changes\nconst handleFilterChange=()=>{loadHistoryData(selectedDepartmentForHistory,startDate,endDate);};// Load reports - Fixed to handle the actual API response\nconst loadReports=async()=>{try{setLoading(true);const response=await fetch(`${API_BASE_URL}/reports`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Raw reports data:',data);// Process reports to use EmojiID mapping\nconst processedReports=data.map(report=>{// Initialize emoji counts using EmojiID mapping\nconst emojiCounts={1:0,// Excellent\n2:0,// Good\n3:0,// Okay\n4:0,// Poor\n5:0// Terrible\n};// Update counts based on EmojiID from database\nif(report.responses&&Array.isArray(report.responses)){report.responses.forEach(response=>{const emojiId=response.EmojiID;if(emojiCounts.hasOwnProperty(emojiId)){emojiCounts[emojiId]=response.Count||0;}});}// Convert to display format with emoji characters\nconst emojiData=[{emoji:'ğŸ˜',label:'Excellent',count:emojiCounts[1],id:1},{emoji:'ğŸ˜Š',label:'Good',count:emojiCounts[2],id:2},{emoji:'ğŸ˜',label:'Okay',count:emojiCounts[3],id:3},{emoji:'ğŸ˜',label:'Poor',count:emojiCounts[4],id:4},{emoji:'ğŸ˜¡',label:'Terrible',count:emojiCounts[5],id:5}];return{department:report.department,question:report.question,totalResponses:report.totalResponses||0,responses:report.responses||[],emojiData:emojiData};});setReports(processedReports);setError('');}catch(err){console.error('Failed to load reports:',err);setReports([]);setError('Failed to load reports: '+err.message);}finally{setLoading(false);}};// Add department\nconst addDepartment=async()=>{if(!newDepartment.trim()){setError('Department name is required');return;}setLoading(true);try{const response=await fetch(`${API_BASE_URL}/departments`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:newDepartment.trim()})});if(response.ok){setNewDepartment('');await loadDepartments();}else{const errorData=await response.json();throw new Error(errorData.error||'Failed to add department');}}catch(err){setError(err.message);}finally{setLoading(false);}};// Add question\nconst addQuestion=async()=>{if(!selectedDepartment||!newQuestion.trim()){setError('Department and question text are required');return;}setLoading(true);try{const dept=departments.find(d=>d.DepartmentID==selectedDepartment);if(!dept){throw new Error('Department not found');}const response=await fetch(`${API_BASE_URL}/departments/${dept.URLSlug}/questions`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({questionText:newQuestion.trim()})});if(response.ok){setNewQuestion('');setSelectedDepartment('');await loadQuestions();}else{const errorData=await response.json();throw new Error(errorData.error||'Failed to add question');}}catch(err){setError(err.message);}finally{setLoading(false);}};// Initial load\nuseEffect(()=>{loadDepartments();},[]);// Load data when switching tabs\nuseEffect(()=>{if(activeTab==='questions'){loadQuestions();}else if(activeTab==='reports'){loadReports();}else if(activeTab==='history'){loadHistoryData();}else if(activeTab==='admin'&&userLevel===1){// This would be where you'd load admin management data\n}},[activeTab,isLoggedIn]);if(!isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-8 max-w-md w-full\",children:activeTab==='login'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-6\",children:[/*#__PURE__*/_jsx(Lock,{className:\"w-8 h-8 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Admin Login\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:loginForm.username,onChange:e=>setLoginForm({...loginForm,username:e.target.value}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:loginForm.password,onChange:e=>setLoginForm({...loginForm,password:e.target.value}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Logging in...':'Login'})]}),userLevel===1&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('register'),className:\"text-blue-600 hover:text-blue-800 text-sm\",children:\"Register new admin\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-6\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-8 h-8 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Register Admin\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:registerForm.username,onChange:e=>setRegisterForm({...registerForm,username:e.target.value}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerForm.password,onChange:e=>setRegisterForm({...registerForm,password:e.target.value}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerForm.confirmPassword,onChange:e=>setRegisterForm({...registerForm,confirmPassword:e.target.value}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Admin Level\"}),/*#__PURE__*/_jsxs(\"select\",{value:registerForm.userLevel,onChange:e=>setRegisterForm({...registerForm,userLevel:parseInt(e.target.value)}),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"Super Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"Admin\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Registering...':'Register'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('login'),className:\"text-blue-600 hover:text-blue-800 text-sm\",children:\"Back to login\"})})]})})});}// Main Dashboard\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Survey Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[\"Logged in as: \",username]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center gap-1 px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\"Logout\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 mb-8\",children:[userLevel===1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('departments'),className:`px-4 py-2 rounded-md font-medium ${activeTab==='departments'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'}`,children:\"Departments\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('questions'),className:`px-4 py-2 rounded-md font-medium ${activeTab==='questions'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'}`,children:\"Questions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('reports'),className:`px-4 py-2 rounded-md font-medium ${activeTab==='reports'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'}`,children:\"Reports\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('history'),className:`px-4 py-2 rounded-md font-medium ${activeTab==='history'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'}`,children:\"History\"}),userLevel===1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('admin-register'),className:`px-4 py-2 rounded-md font-medium ${activeTab==='admin-register'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'}`,children:\"Admin Register\"})]}),activeTab==='departments'&&userLevel===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Departments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newDepartment,onChange:e=>setNewDepartment(e.target.value),placeholder:\"New department name\",className:\"w-full p-2 border rounded-md\",onKeyPress:e=>e.key==='Enter'&&addDepartment()}),/*#__PURE__*/_jsx(\"button\",{onClick:addDepartment,disabled:loading,className:\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Adding...':'Add Department'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:departments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No departments found\"}):departments.map(dept=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded-md flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:dept.Name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"URL: /survey/\",dept.URLSlug]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newName=prompt('Enter new department name:',dept.Name);if(newName&&newName.trim()&&newName!==dept.Name){updateDepartment(dept.DepartmentID,newName);}},className:\"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteDepartment(dept.DepartmentID),className:\"px-2 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200\",children:\"Delete\"})]})]},dept.DepartmentID))})]}),activeTab==='questions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Create Question\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedDepartment,onChange:e=>setSelectedDepartment(e.target.value),className:\"w-full p-2 border rounded-md mb-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select department\"}),departments.map(dept=>/*#__PURE__*/_jsx(\"option\",{value:dept.DepartmentID,children:dept.Name},dept.DepartmentID))]}),/*#__PURE__*/_jsx(\"textarea\",{value:newQuestion,onChange:e=>setNewQuestion(e.target.value),placeholder:\"Question text\",rows:3,className:\"w-full p-2 border rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addQuestion,disabled:loading,className:\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Adding...':'Add Question'})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-2\",children:\"Current Questions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:questions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No questions found\"}):questions.map(q=>{const dept=departments.find(d=>d.DepartmentID===q.DepartmentID);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-1\",children:q.QuestionText}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded ml-2 ${q.IsActive?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'}`,children:q.IsActive?'Active':'Inactive'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[(dept===null||dept===void 0?void 0:dept.Name)||'Unknown Department',\" \\u2022 \",q.CreatedAt?new Date(q.CreatedAt).toLocaleString():'Date not available']})]},q.QuestionID);})})]}),activeTab==='reports'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Ongoing Surveys\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadReports,disabled:loading,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Refreshing...':'Refresh Data'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:reports.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"No reports available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Make sure you have departments with active questions and responses\"})]}):reports.map((report,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-6 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg text-gray-900\",children:report.department}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mt-2 text-base\",children:report.question}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"Total responses: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:report.totalResponses})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-4 text-gray-700\",children:\"Response Breakdown:\"}),report.totalResponses>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-4\",children:report.emojiData.map((item,j)=>{const percentage=report.totalResponses>0?(item.count/report.totalResponses*100).toFixed(1):0;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-2\",children:item.emoji}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-2xl text-gray-800\",children:item.count}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 font-medium\",children:[percentage,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:item.label})]},j);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-6 text-gray-500\",children:\"No responses yet for this question\"})]})]},i))})]}),activeTab==='history'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Survey History & Export\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToExcel,disabled:exportLoading||filteredData.length===0,className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),exportLoading?'Exporting...':'Export to Excel']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-medium mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Building,{className:\"w-4 h-4\"}),\"Filter Options\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Department\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDepartmentForHistory,onChange:e=>setSelectedDepartmentForHistory(e.target.value),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Departments\"}),departments.map(dept=>/*#__PURE__*/_jsx(\"option\",{value:dept.DepartmentID,children:dept.Name},dept.DepartmentID))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>setStartDate(e.target.value),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>setEndDate(e.target.value),className:\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleFilterChange,disabled:loading,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Filtering...':'Apply Filters'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedDepartmentForHistory('');setStartDate('');setEndDate('');loadHistoryData();},className:\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\",children:\"Clear Filters\"})]})]}),filteredData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-800\",children:\"Results Summary\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Records: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:filteredData.length})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Responses: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:filteredData.reduce((sum,item)=>sum+(item.totalResponses||0),0)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Departments: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:new Set(filteredData.map(item=>item.department)).size})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Loading history data...\"})]}):filteredData.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(History,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-2\",children:\"No survey data found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Try adjusting your filters or create some surveys to see data here\"})]}):filteredData.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg text-gray-900\",children:item.department}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mt-1\",children:item.question})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Total Responses: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:item.totalResponses})]}),item.createdAt&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:new Date(item.createdAt).toLocaleDateString()})]})]}),item.emojiData&&item.totalResponses>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-3 border\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-2\",children:item.emojiData.map((emoji,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl mb-1\",children:emoji.emoji}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg\",children:emoji.count}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[item.totalResponses>0?(emoji.count/item.totalResponses*100).toFixed(1):0,\"%\"]})]},i))})})]},index))})]}),activeTab==='admin-register'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Register New Admin\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:registerForm.username,onChange:e=>setRegisterForm({...registerForm,username:e.target.value}),className:\"w-full p-2 border rounded-md\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerForm.password,onChange:e=>setRegisterForm({...registerForm,password:e.target.value}),className:\"w-full p-2 border rounded-md\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerForm.confirmPassword,onChange:e=>setRegisterForm({...registerForm,confirmPassword:e.target.value}),className:\"w-full p-2 border rounded-md\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Admin Level\"}),/*#__PURE__*/_jsxs(\"select\",{value:registerForm.userLevel,onChange:e=>setRegisterForm({...registerForm,userLevel:parseInt(e.target.value)}),className:\"w-full p-2 border rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"Super Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"Admin\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\",children:loading?'Registering...':'Register Admin'})]})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","PlusCircle","BarChart3","Users","History","Download","Calendar","Building","Lock","UserPlus","LogOut","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","activeTab","setActiveTab","departments","setDepartments","questions","setQuestions","newDepartment","setNewDepartment","newQuestion","setNewQuestion","selectedDepartment","setSelectedDepartment","reports","setReports","loading","setLoading","error","setError","historyData","setHistoryData","filteredData","setFilteredData","selectedDepartmentForHistory","setSelectedDepartmentForHistory","startDate","setStartDate","endDate","setEndDate","exportLoading","setExportLoading","isLoggedIn","setIsLoggedIn","userLevel","setUserLevel","username","setUsername","loginForm","setLoginForm","password","registerForm","setRegisterForm","confirmPassword","API_BASE_URL","token","localStorage","getItem","verifyToken","response","fetch","headers","ok","data","json","removeItem","err","console","handleLogin","e","preventDefault","method","body","JSON","stringify","setItem","errorData","Error","message","handleRegister","handleLogout","loadDepartments","status","Array","isArray","loadQuestions","loadHistoryData","departmentId","arguments","length","undefined","url","params","URLSearchParams","append","toString","updateDepartment","id","newName","name","trim","deleteDepartment","window","confirm","exportToExcel","_departments$find","blob","downloadUrl","URL","createObjectURL","link","document","createElement","href","now","Date","dateStr","toISOString","split","deptName","find","d","DepartmentID","Name","download","appendChild","click","removeChild","revokeObjectURL","handleFilterChange","loadReports","log","processedReports","map","report","emojiCounts","responses","forEach","emojiId","EmojiID","hasOwnProperty","Count","emojiData","emoji","label","count","department","question","totalResponses","addDepartment","addQuestion","dept","URLSlug","questionText","className","children","onSubmit","type","value","onChange","target","required","disabled","onClick","parseInt","placeholder","onKeyPress","key","prompt","rows","q","QuestionText","IsActive","CreatedAt","toLocaleString","QuestionID","i","item","j","percentage","toFixed","reduce","sum","Set","size","index","createdAt","toLocaleDateString"],"sources":["C:/Users/dularad/Desktop/smile-survey-clean/admin/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { PlusCircle, BarChart3, Users, History, Download, Calendar, Building, Lock, UserPlus, LogOut } from 'lucide-react';\r\n\r\nconst AdminDashboard = () => {\r\n  const [activeTab, setActiveTab] = useState('login');\r\n  const [departments, setDepartments] = useState([]);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [newDepartment, setNewDepartment] = useState('');\r\n  const [newQuestion, setNewQuestion] = useState('');\r\n  const [selectedDepartment, setSelectedDepartment] = useState('');\r\n  const [reports, setReports] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [historyData, setHistoryData] = useState([]);\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [selectedDepartmentForHistory, setSelectedDepartmentForHistory] = useState('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [exportLoading, setExportLoading] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [userLevel, setUserLevel] = useState(2); // 1=superadmin, 2=admin\r\n  const [username, setUsername] = useState('');\r\n  const [loginForm, setLoginForm] = useState({ username: '', password: '' });\r\n  const [registerForm, setRegisterForm] = useState({\r\n    username: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    userLevel: 2\r\n  });\r\n\r\n  const API_BASE_URL = 'http://localhost:5000/api';\r\n\r\n  // Check if user is already logged in\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      verifyToken(token);\r\n    }\r\n  }, []);\r\n\r\n  const verifyToken = async (token) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/admin/me`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setIsLoggedIn(true);\r\n        setUserLevel(data.userLevel);\r\n        setUsername(data.username);\r\n        setActiveTab(data.userLevel === 1 ? 'departments' : 'questions');\r\n      } else {\r\n        localStorage.removeItem('token');\r\n      }\r\n    } catch (err) {\r\n      localStorage.removeItem('token');\r\n      console.error('Token verification failed:', err);\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/admin/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(loginForm)\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        localStorage.setItem('token', data.token);\r\n        setIsLoggedIn(true);\r\n        setUserLevel(data.userLevel);\r\n        setUsername(data.username);\r\n        setActiveTab(data.userLevel === 1 ? 'departments' : 'questions');\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Login failed');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    if (registerForm.password !== registerForm.confirmPassword) {\r\n      setError('Passwords do not match');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`${API_BASE_URL}/admin/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          username: registerForm.username,\r\n          password: registerForm.password,\r\n          userLevel: registerForm.userLevel\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setRegisterForm({ username: '', password: '', confirmPassword: '', userLevel: 2 });\r\n        setError('');\r\n        setActiveTab('login');\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Registration failed');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setIsLoggedIn(false);\r\n    setUserLevel(2);\r\n    setUsername('');\r\n    setActiveTab('login');\r\n  };\r\n\r\n  // Load departments\r\n  const loadDepartments = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/departments`);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setDepartments(Array.isArray(data) ? data : []);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Failed to load departments:', err);\r\n      setDepartments([]);\r\n      setError('Failed to load departments: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load questions\r\n  const loadQuestions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/questions`);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setQuestions(Array.isArray(data) ? data : []);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Failed to load questions:', err);\r\n      setQuestions([]);\r\n      setError('Failed to load questions: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load history data\r\n  const loadHistoryData = async (departmentId = '', startDate = '', endDate = '') => {\r\n    try {\r\n      setLoading(true);\r\n      let url = `${API_BASE_URL}/reports/history`;\r\n      const params = new URLSearchParams();\r\n\r\n      if (departmentId) params.append('departmentId', departmentId);\r\n      if (startDate) params.append('startDate', startDate);\r\n      if (endDate) params.append('endDate', endDate);\r\n\r\n      if (params.toString()) {\r\n        url += `?${params.toString()}`;\r\n      }\r\n\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setHistoryData(Array.isArray(data) ? data : []);\r\n      setFilteredData(Array.isArray(data) ? data : []);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Failed to load history data:', err);\r\n      setHistoryData([]);\r\n      setFilteredData([]);\r\n      setError('Failed to load history data: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  // Update department\r\n  const updateDepartment = async (id, newName) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/departments/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: newName.trim() })\r\n      });\r\n\r\n      if (response.ok) {\r\n        await loadDepartments();\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to update department');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Delete department\r\n  const deleteDepartment = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this department? This cannot be undone.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/departments/${id}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      if (response.ok) {\r\n        await loadDepartments();\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to delete department');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  // Export to Excel function\r\n  const exportToExcel = async () => {\r\n    try {\r\n      setExportLoading(true);\r\n\r\n      let url = `${API_BASE_URL}/reports/export`;\r\n      const params = new URLSearchParams();\r\n\r\n      if (selectedDepartmentForHistory) params.append('departmentId', selectedDepartmentForHistory);\r\n      if (startDate) params.append('startDate', startDate);\r\n      if (endDate) params.append('endDate', endDate);\r\n\r\n      if (params.toString()) {\r\n        url += `?${params.toString()}`;\r\n      }\r\n\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Export failed: ${response.status}`);\r\n      }\r\n\r\n      // Get the blob from response\r\n      const blob = await response.blob();\r\n\r\n      // Create download link\r\n      const downloadUrl = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = downloadUrl;\r\n\r\n      // Generate filename with current date\r\n      const now = new Date();\r\n      const dateStr = now.toISOString().split('T')[0];\r\n      const deptName = selectedDepartmentForHistory ?\r\n        departments.find(d => d.DepartmentID == selectedDepartmentForHistory)?.Name || 'Selected' : 'All';\r\n\r\n      link.download = `Survey_Report_${deptName}_${dateStr}.xlsx`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n\r\n      // Clean up\r\n      window.URL.revokeObjectURL(downloadUrl);\r\n\r\n    } catch (err) {\r\n      console.error('Export failed:', err);\r\n      setError('Export failed: ' + err.message);\r\n    } finally {\r\n      setExportLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle filter changes\r\n  const handleFilterChange = () => {\r\n    loadHistoryData(selectedDepartmentForHistory, startDate, endDate);\r\n  };\r\n\r\n  // Load reports - Fixed to handle the actual API response\r\n  const loadReports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/reports`);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Raw reports data:', data);\r\n\r\n      // Process reports to use EmojiID mapping\r\n      const processedReports = data.map(report => {\r\n        // Initialize emoji counts using EmojiID mapping\r\n        const emojiCounts = {\r\n          1: 0, // Excellent\r\n          2: 0, // Good\r\n          3: 0, // Okay\r\n          4: 0, // Poor\r\n          5: 0  // Terrible\r\n        };\r\n\r\n        // Update counts based on EmojiID from database\r\n        if (report.responses && Array.isArray(report.responses)) {\r\n          report.responses.forEach(response => {\r\n            const emojiId = response.EmojiID;\r\n            if (emojiCounts.hasOwnProperty(emojiId)) {\r\n              emojiCounts[emojiId] = response.Count || 0;\r\n            }\r\n          });\r\n        }\r\n\r\n        // Convert to display format with emoji characters\r\n        const emojiData = [\r\n          { emoji: 'ğŸ˜', label: 'Excellent', count: emojiCounts[1], id: 1 },\r\n          { emoji: 'ğŸ˜Š', label: 'Good', count: emojiCounts[2], id: 2 },\r\n          { emoji: 'ğŸ˜', label: 'Okay', count: emojiCounts[3], id: 3 },\r\n          { emoji: 'ğŸ˜', label: 'Poor', count: emojiCounts[4], id: 4 },\r\n          { emoji: 'ğŸ˜¡', label: 'Terrible', count: emojiCounts[5], id: 5 }\r\n        ];\r\n\r\n        return {\r\n          department: report.department,\r\n          question: report.question,\r\n          totalResponses: report.totalResponses || 0,\r\n          responses: report.responses || [],\r\n          emojiData: emojiData\r\n        };\r\n      });\r\n\r\n      setReports(processedReports);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Failed to load reports:', err);\r\n      setReports([]);\r\n      setError('Failed to load reports: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Add department\r\n  const addDepartment = async () => {\r\n    if (!newDepartment.trim()) {\r\n      setError('Department name is required');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/departments`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: newDepartment.trim() })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setNewDepartment('');\r\n        await loadDepartments();\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to add department');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Add question\r\n  const addQuestion = async () => {\r\n    if (!selectedDepartment || !newQuestion.trim()) {\r\n      setError('Department and question text are required');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const dept = departments.find(d => d.DepartmentID == selectedDepartment);\r\n      if (!dept) {\r\n        throw new Error('Department not found');\r\n      }\r\n\r\n      const response = await fetch(`${API_BASE_URL}/departments/${dept.URLSlug}/questions`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ questionText: newQuestion.trim() })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setNewQuestion('');\r\n        setSelectedDepartment('');\r\n        await loadQuestions();\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to add question');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    loadDepartments();\r\n  }, []);\r\n\r\n  // Load data when switching tabs\r\n  useEffect(() => {\r\n    if (activeTab === 'questions') {\r\n      loadQuestions();\r\n    } else if (activeTab === 'reports') {\r\n      loadReports();\r\n    } else if (activeTab === 'history') {\r\n      loadHistoryData();\r\n    } else if (activeTab === 'admin' && userLevel === 1) {\r\n      // This would be where you'd load admin management data\r\n    }\r\n  }, [activeTab, isLoggedIn]);\r\n\r\n  if (!isLoggedIn) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-8 max-w-md w-full\">\r\n          {activeTab === 'login' ? (\r\n            <>\r\n              <div className=\"flex items-center justify-center mb-6\">\r\n                <Lock className=\"w-8 h-8 text-blue-600 mr-2\" />\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Admin Login</h1>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              <form onSubmit={handleLogin}>\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Username\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={loginForm.username}\r\n                    onChange={(e) => setLoginForm({ ...loginForm, username: e.target.value })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={loginForm.password}\r\n                    onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n                >\r\n                  {loading ? 'Logging in...' : 'Login'}\r\n                </button>\r\n              </form>\r\n\r\n              {userLevel === 1 && (\r\n                <div className=\"mt-4 text-center\">\r\n                  <button\r\n                    onClick={() => setActiveTab('register')}\r\n                    className=\"text-blue-600 hover:text-blue-800 text-sm\"\r\n                  >\r\n                    Register new admin\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex items-center justify-center mb-6\">\r\n                <UserPlus className=\"w-8 h-8 text-blue-600 mr-2\" />\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Register Admin</h1>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              <form onSubmit={handleRegister}>\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Username\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={registerForm.username}\r\n                    onChange={(e) => setRegisterForm({ ...registerForm, username: e.target.value })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={registerForm.password}\r\n                    onChange={(e) => setRegisterForm({ ...registerForm, password: e.target.value })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Confirm Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={registerForm.confirmPassword}\r\n                    onChange={(e) => setRegisterForm({ ...registerForm, confirmPassword: e.target.value })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                    Admin Level\r\n                  </label>\r\n                  <select\r\n                    value={registerForm.userLevel}\r\n                    onChange={(e) => setRegisterForm({ ...registerForm, userLevel: parseInt(e.target.value) })}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value={1}>Super Admin</option>\r\n                    <option value={2}>Admin</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n                >\r\n                  {loading ? 'Registering...' : 'Register'}\r\n                </button>\r\n              </form>\r\n\r\n              <div className=\"mt-4 text-center\">\r\n                <button\r\n                  onClick={() => setActiveTab('login')}\r\n                  className=\"text-blue-600 hover:text-blue-800 text-sm\"\r\n                >\r\n                  Back to login\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // Main Dashboard\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <div className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-6 flex justify-between items-center\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Survey Admin Dashboard</h1>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <span className=\"text-gray-700\">Logged in as: {username}</span>\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"flex items-center gap-1 px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300\"\r\n            >\r\n              <LogOut className=\"w-4 h-4\" />\r\n              Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <div className=\"flex space-x-4 mb-8\">\r\n          {/* Only show departments tab for super admin */}\r\n          {userLevel === 1 && (\r\n            <button\r\n              onClick={() => setActiveTab('departments')}\r\n              className={`px-4 py-2 rounded-md font-medium ${activeTab === 'departments'\r\n                ? 'bg-blue-100 text-blue-700'\r\n                : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n            >\r\n              Departments\r\n            </button>\r\n          )}\r\n\r\n          <button\r\n            onClick={() => setActiveTab('questions')}\r\n            className={`px-4 py-2 rounded-md font-medium ${activeTab === 'questions'\r\n              ? 'bg-blue-100 text-blue-700'\r\n              : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n          >\r\n            Questions\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('reports')}\r\n            className={`px-4 py-2 rounded-md font-medium ${activeTab === 'reports'\r\n              ? 'bg-blue-100 text-blue-700'\r\n              : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n          >\r\n            Reports\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('history')}\r\n            className={`px-4 py-2 rounded-md font-medium ${activeTab === 'history'\r\n              ? 'bg-blue-100 text-blue-700'\r\n              : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n          >\r\n            History\r\n          </button>\r\n\r\n          {/* Only show admin registration for super admin */}\r\n          {userLevel === 1 && (\r\n            <button\r\n              onClick={() => setActiveTab('admin-register')}\r\n              className={`px-4 py-2 rounded-md font-medium ${activeTab === 'admin-register'\r\n                ? 'bg-blue-100 text-blue-700'\r\n                : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n            >\r\n              Admin Register\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {activeTab === 'departments' && userLevel === 1 && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Departments</h2>\r\n            <div className=\"mb-6\">\r\n              <input\r\n                type=\"text\"\r\n                value={newDepartment}\r\n                onChange={(e) => setNewDepartment(e.target.value)}\r\n                placeholder=\"New department name\"\r\n                className=\"w-full p-2 border rounded-md\"\r\n                onKeyPress={(e) => e.key === 'Enter' && addDepartment()}\r\n              />\r\n              <button\r\n                onClick={addDepartment}\r\n                disabled={loading}\r\n                className=\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n              >\r\n                {loading ? 'Adding...' : 'Add Department'}\r\n              </button>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {departments.length === 0 ? (\r\n                <p className=\"text-gray-500 text-center py-4\">No departments found</p>\r\n              ) : (\r\n                departments.map(dept => (\r\n                  <div key={dept.DepartmentID} className=\"p-3 border rounded-md flex justify-between items-center\">\r\n                    <div>\r\n                      <p className=\"font-medium\">{dept.Name}</p>\r\n                      <p className=\"text-sm text-gray-600\">URL: /survey/{dept.URLSlug}</p>\r\n                    </div>\r\n                    <div className=\"flex space-x-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          const newName = prompt('Enter new department name:', dept.Name);\r\n                          if (newName && newName.trim() && newName !== dept.Name) {\r\n                            updateDepartment(dept.DepartmentID, newName);\r\n                          }\r\n                        }}\r\n                        className=\"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200\"\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      <button\r\n                        onClick={() => deleteDepartment(dept.DepartmentID)}\r\n                        className=\"px-2 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'questions' && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Create Question</h2>\r\n            <div className=\"mb-6\">\r\n              <select\r\n                value={selectedDepartment}\r\n                onChange={(e) => setSelectedDepartment(e.target.value)}\r\n                className=\"w-full p-2 border rounded-md mb-2\"\r\n              >\r\n                <option value=\"\">Select department</option>\r\n                {departments.map(dept => (\r\n                  <option key={dept.DepartmentID} value={dept.DepartmentID}>\r\n                    {dept.Name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <textarea\r\n                value={newQuestion}\r\n                onChange={(e) => setNewQuestion(e.target.value)}\r\n                placeholder=\"Question text\"\r\n                rows={3}\r\n                className=\"w-full p-2 border rounded-md\"\r\n              />\r\n              <button\r\n                onClick={addQuestion}\r\n                disabled={loading}\r\n                className=\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n              >\r\n                {loading ? 'Adding...' : 'Add Question'}\r\n              </button>\r\n            </div>\r\n            <h3 className=\"text-lg font-bold mb-2\">Current Questions</h3>\r\n            <div className=\"space-y-3\">\r\n              {questions.length === 0 ? (\r\n                <p className=\"text-gray-500 text-center py-4\">No questions found</p>\r\n              ) : (\r\n                questions.map(q => {\r\n                  const dept = departments.find(d => d.DepartmentID === q.DepartmentID);\r\n                  return (\r\n                    <div key={q.QuestionID} className=\"p-3 border rounded-md\">\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <p className=\"flex-1\">{q.QuestionText}</p>\r\n                        <span className={`px-2 py-1 text-xs rounded ml-2 ${q.IsActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                          {q.IsActive ? 'Active' : 'Inactive'}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        {dept?.Name || 'Unknown Department'} â€¢ {q.CreatedAt ? new Date(q.CreatedAt).toLocaleString() : 'Date not available'}\r\n                      </p>\r\n                    </div>\r\n                  );\r\n                })\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'reports' && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold\">Ongoing Surveys</h2>\r\n              <button\r\n                onClick={loadReports}\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n              >\r\n                {loading ? 'Refreshing...' : 'Refresh Data'}\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {reports.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500 mb-4\">No reports available</p>\r\n                  <p className=\"text-sm text-gray-400\">Make sure you have departments with active questions and responses</p>\r\n                </div>\r\n              ) : (\r\n                reports.map((report, i) => (\r\n                  <div key={i} className=\"border rounded-lg p-6 bg-gray-50\">\r\n                    <div className=\"mb-4\">\r\n                      <h3 className=\"font-bold text-lg text-gray-900\">{report.department}</h3>\r\n                      <p className=\"text-gray-700 mt-2 text-base\">{report.question}</p>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        Total responses: <span className=\"font-semibold\">{report.totalResponses}</span>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white rounded-lg p-4 border\">\r\n                      <h4 className=\"font-medium mb-4 text-gray-700\">Response Breakdown:</h4>\r\n\r\n                      {report.totalResponses > 0 ? (\r\n                        <div className=\"grid grid-cols-5 gap-4\">\r\n                          {report.emojiData.map((item, j) => {\r\n                            const percentage = report.totalResponses > 0 ? ((item.count / report.totalResponses) * 100).toFixed(1) : 0;\r\n                            return (\r\n                              <div key={j} className=\"text-center\">\r\n                                <div className=\"text-4xl mb-2\">{item.emoji}</div>\r\n                                <div className=\"font-bold text-2xl text-gray-800\">{item.count}</div>\r\n                                <div className=\"text-sm text-gray-600 font-medium\">{percentage}%</div>\r\n                                <div className=\"text-xs text-gray-500 mt-1\">{item.label}</div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"text-center py-6 text-gray-500\">\r\n                          No responses yet for this question\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'history' && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold\">Survey History & Export</h2>\r\n              <button\r\n                onClick={exportToExcel}\r\n                disabled={exportLoading || filteredData.length === 0}\r\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                {exportLoading ? 'Exporting...' : 'Export to Excel'}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Filter Controls */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n              <h3 className=\"font-medium mb-4 flex items-center gap-2\">\r\n                <Building className=\"w-4 h-4\" />\r\n                Filter Options\r\n              </h3>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                {/* Department Filter */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Department\r\n                  </label>\r\n                  <select\r\n                    value={selectedDepartmentForHistory}\r\n                    onChange={(e) => setSelectedDepartmentForHistory(e.target.value)}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"\">All Departments</option>\r\n                    {departments.map(dept => (\r\n                      <option key={dept.DepartmentID} value={dept.DepartmentID}>\r\n                        {dept.Name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Start Date Filter */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Start Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={startDate}\r\n                    onChange={(e) => setStartDate(e.target.value)}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                {/* End Date Filter */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    End Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={endDate}\r\n                    onChange={(e) => setEndDate(e.target.value)}\r\n                    className=\"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Filter Actions */}\r\n              <div className=\"flex gap-2 mt-4\">\r\n                <button\r\n                  onClick={handleFilterChange}\r\n                  disabled={loading}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n                >\r\n                  {loading ? 'Filtering...' : 'Apply Filters'}\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedDepartmentForHistory('');\r\n                    setStartDate('');\r\n                    setEndDate('');\r\n                    loadHistoryData();\r\n                  }}\r\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\r\n                >\r\n                  Clear Filters\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Results Summary */}\r\n            {filteredData.length > 0 && (\r\n              <div className=\"bg-blue-50 p-4 rounded-lg mb-6\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <BarChart3 className=\"w-4 h-4 text-blue-600\" />\r\n                  <span className=\"font-medium text-blue-800\">Results Summary</span>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n                  <div>\r\n                    <span className=\"text-gray-600\">Total Records: </span>\r\n                    <span className=\"font-semibold\">{filteredData.length}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"text-gray-600\">Total Responses: </span>\r\n                    <span className=\"font-semibold\">\r\n                      {filteredData.reduce((sum, item) => sum + (item.totalResponses || 0), 0)}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"text-gray-600\">Departments: </span>\r\n                    <span className=\"font-semibold\">\r\n                      {new Set(filteredData.map(item => item.department)).size}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* History Data Display */}\r\n            <div className=\"space-y-4\">\r\n              {loading ? (\r\n                <div className=\"text-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n                  <p className=\"mt-2 text-gray-600\">Loading history data...</p>\r\n                </div>\r\n              ) : filteredData.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <History className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500 mb-2\">No survey data found</p>\r\n                  <p className=\"text-sm text-gray-400\">\r\n                    Try adjusting your filters or create some surveys to see data here\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                filteredData.map((item, index) => (\r\n                  <div key={index} className=\"border rounded-lg p-4 bg-gray-50\">\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <div>\r\n                        <h3 className=\"font-bold text-lg text-gray-900\">{item.department}</h3>\r\n                        <p className=\"text-gray-700 mt-1\">{item.question}</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          Total Responses: <span className=\"font-semibold\">{item.totalResponses}</span>\r\n                        </p>\r\n                        {item.createdAt && (\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            {new Date(item.createdAt).toLocaleDateString()}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Emoji Response Breakdown */}\r\n                    {item.emojiData && item.totalResponses > 0 && (\r\n                      <div className=\"bg-white rounded-lg p-3 border\">\r\n                        <div className=\"grid grid-cols-5 gap-2\">\r\n                          {item.emojiData.map((emoji, i) => (\r\n                            <div key={i} className=\"text-center\">\r\n                              <div className=\"text-2xl mb-1\">{emoji.emoji}</div>\r\n                              <div className=\"font-bold text-lg\">{emoji.count}</div>\r\n                              <div className=\"text-xs text-gray-600\">\r\n                                {item.totalResponses > 0 ?\r\n                                  ((emoji.count / item.totalResponses) * 100).toFixed(1) : 0}%\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n\r\n        {/* Add the admin registration tab */}\r\n        {activeTab === 'admin-register' && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Register New Admin</h2>\r\n            {error && (\r\n              <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\">\r\n                {error}\r\n              </div>\r\n            )}\r\n            <form onSubmit={handleRegister}>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                  Username\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={registerForm.username}\r\n                  onChange={(e) => setRegisterForm({ ...registerForm, username: e.target.value })}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                  Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={registerForm.password}\r\n                  onChange={(e) => setRegisterForm({ ...registerForm, password: e.target.value })}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                  Confirm Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={registerForm.confirmPassword}\r\n                  onChange={(e) => setRegisterForm({ ...registerForm, confirmPassword: e.target.value })}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-gray-700 text-sm font-medium mb-2\">\r\n                  Admin Level\r\n                </label>\r\n                <select\r\n                  value={registerForm.userLevel}\r\n                  onChange={(e) => setRegisterForm({ ...registerForm, userLevel: parseInt(e.target.value) })}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                >\r\n                  <option value={1}>Super Admin</option>\r\n                  <option value={2}>Admin</option>\r\n                </select>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400\"\r\n              >\r\n                {loading ? 'Registering...' : 'Register Admin'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}